# Enterprise Template Management Examples

ì‹¤ìš©ì ì¸ ì˜ˆì‹œë¥¼ í†µí•´ ì½”ë“œ í…œí”Œë¦¿, í”¼ë“œë°± í…œí”Œë¦¿, í…œí”Œë¦¿ ìµœì í™” íŒ¨í„´ì„ í•™ìŠµí•©ë‹ˆë‹¤.

---

## Example 1: FastAPI í”„ë¡œì íŠ¸ ìŠ¤ìºí´ë”©

**Scenario**: FastAPI ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì¸ì¦, ë°ì´í„°ë² ì´ìŠ¤, Celery ê¸°ëŠ¥ê³¼ í•¨ê»˜ ìƒì„±

**Input**:
```python
from moai_workflow_templates import load_template

# í…œí”Œë¦¿ ë¡œë“œ
template = load_template("backend/fastapi")

# í”„ë¡œì íŠ¸ ìŠ¤ìºí´ë”©
project = template.scaffold(
    name="my-api",
    features=["auth", "database", "celery"],
    customizations={
        "db": "postgresql",
        "auth_type": "jwt",
        "python_version": "3.13"
    }
)
```

**Output**:
```
my-api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ database.py
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ router.py
â”‚   â”‚   â”œâ”€â”€ schemas.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â””â”€â”€ jwt.py
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ user.py
â”‚   â””â”€â”€ tasks/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ celery_app.py
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ test_auth.py
â”‚   â””â”€â”€ test_main.py
â”œâ”€â”€ alembic/
â”‚   â”œâ”€â”€ versions/
â”‚   â””â”€â”€ env.py
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

```python
# ìƒì„±ëœ src/main.py
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from src.auth.router import router as auth_router
from src.config import settings

app = FastAPI(
    title=settings.PROJECT_NAME,
    version="1.0.0",
    docs_url="/docs",
    redoc_url="/redoc"
)

app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.ALLOWED_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

app.include_router(auth_router, prefix="/api/auth", tags=["auth"])

@app.get("/health")
async def health_check():
    return {"status": "healthy"}
```

**Explanation**: FastAPI í…œí”Œë¦¿ì€ í”„ë¡œì íŠ¸ êµ¬ì¡°, ì¸ì¦ ëª¨ë“ˆ, ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •, Celery ì‘ì—…, Docker êµ¬ì„±, CI/CD íŒŒì´í”„ë¼ì¸ì„ í•œ ë²ˆì— ìƒì„±í•©ë‹ˆë‹¤. features ì˜µì…˜ìœ¼ë¡œ í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## Example 2: GitHub í”¼ë“œë°± í…œí”Œë¦¿ í™œìš©

**Scenario**: /moai:9-feedback ëª…ë ¹ìœ¼ë¡œ ë²„ê·¸ ë¦¬í¬íŠ¸ ì´ìŠˆ ìƒì„±

**Input**:
```bash
# í”¼ë“œë°± ëª…ë ¹ ì‹¤í–‰
/moai:9-feedback "ë¡œê·¸ì¸ ì‹œ JWT í† í°ì´ ë§Œë£Œë˜ì–´ë„ ê°±ì‹ ë˜ì§€ ì•ŠìŒ"
```

**Output**:
```markdown
## Bug Report Template (ìë™ ì„ íƒë¨)

### Issue Title
[Bug] JWT í† í° ìë™ ê°±ì‹  ì‹¤íŒ¨

### Environment
- **OS**: macOS 15.1
- **Python**: 3.13.0
- **FastAPI**: 0.109.0
- **Project Version**: 1.2.3

### Description
ë¡œê·¸ì¸ ì‹œ JWT í† í°ì´ ë§Œë£Œë˜ì–´ë„ ê°±ì‹ ë˜ì§€ ì•ŠìŒ

### Steps to Reproduce
1. ì‚¬ìš©ì ë¡œê·¸ì¸
2. access_token ë§Œë£Œ ëŒ€ê¸° (ê¸°ë³¸ 15ë¶„)
3. ë³´í˜¸ëœ ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­
4. 401 Unauthorized ì‘ë‹µ ìˆ˜ì‹ 

### Expected Behavior
access_token ë§Œë£Œ ì‹œ refresh_tokenì„ ì‚¬ìš©í•˜ì—¬ ìë™ ê°±ì‹ 

### Actual Behavior
í† í° ê°±ì‹  ì—†ì´ 401 ì—ëŸ¬ ë°˜í™˜

### Possible Solution
- AuthMiddlewareì—ì„œ í† í° ë§Œë£Œ ê²€ì‚¬ ì¶”ê°€
- ìë™ ê°±ì‹  ë¡œì§ êµ¬í˜„

### Additional Context
- ê´€ë ¨ ì½”ë“œ: `src/auth/middleware.py`
- ì˜í–¥ ë²”ìœ„: ëª¨ë“  ì¸ì¦ëœ API ì—”ë“œí¬ì¸íŠ¸

### Labels
`bug`, `auth`, `high-priority`

---
Generated by: MoAI-ADK Feedback System
SPEC Reference: SPEC-001 (User Authentication)
```

**Explanation**: í”¼ë“œë°± í…œí”Œë¦¿ì€ 6ê°€ì§€ ìœ í˜•(Bug, Feature, Improvement, Refactor, Docs, Question) ì¤‘ ì ì ˆí•œ ê²ƒì„ ìë™ ì„ íƒí•©ë‹ˆë‹¤. í™˜ê²½ ì •ë³´, ì¬í˜„ ë‹¨ê³„, ì˜ˆìƒ/ì‹¤ì œ ë™ì‘ì„ êµ¬ì¡°í™”í•˜ì—¬ ì™„ì „í•œ ì´ìŠˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

## Example 3: ìŠ¤ë§ˆíŠ¸ í…œí”Œë¦¿ ë¨¸ì§€ (ì—…ë°ì´íŠ¸)

**Scenario**: MoAI-ADK ì—…ë°ì´íŠ¸ í›„ ì‚¬ìš©ì ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ ë³´ì¡´í•˜ë©° í…œí”Œë¦¿ ë³‘í•©

**Input**:
```python
from moai_workflow_templates import TemplateOptimizer

optimizer = TemplateOptimizer()

# ë°±ì—…ì—ì„œ ì‚¬ìš©ì ì»¤ìŠ¤í„°ë§ˆì´ì§• ì¶”ì¶œ
backup_id = "backup-2025-10-15-v0.27.0"
user_customizations = optimizer.extract_customizations(backup_id)

# ìµœì‹  í…œí”Œë¦¿ê³¼ ìŠ¤ë§ˆíŠ¸ ë¨¸ì§€
merge_result = optimizer.smart_merge(
    backup=backup_id,
    template="v0.28.2",  # ìµœì‹  ë²„ì „
    preserve_customizations=True
)
```

**Output**:
```json
{
  "merge_status": "success",
  "backup_version": "0.27.0",
  "template_version": "0.28.2",
  "user_customizations_preserved": [
    {
      "file": ".moai/config/config.yaml",
      "preserved_fields": [
        "user.name",
        "language.conversation_language",
        "team_settings.custom_agents"
      ]
    },
    {
      "file": ".claude/settings.json",
      "preserved_fields": [
        "permissions.allow",
        "permissions.deny"
      ]
    }
  ],
  "template_updates_applied": [
    {
      "file": ".moai/config/config.yaml",
      "updates": [
        "Added: system.new_feature_flag",
        "Updated: version to 0.28.2"
      ]
    },
    {
      "file": ".claude/agents/",
      "updates": [
        "Added: 3 new agent definitions",
        "Updated: 5 existing agents"
      ]
    }
  ],
  "conflicts_resolved": [
    {
      "file": ".moai/config/sections/quality.yaml",
      "resolution": "Merged both changes",
      "details": "User's custom thresholds + new quality metrics"
    }
  ],
  "manual_review_required": [],
  "restoration_point": ".moai/backups/pre-merge-2025-12-06/"
}
```

**Explanation**: ìŠ¤ë§ˆíŠ¸ ë¨¸ì§€ëŠ” 3-way ë¨¸ì§€ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì»¤ìŠ¤í„°ë§ˆì´ì§•(ì„¤ì •, ê¶Œí•œ)ì„ ë³´ì¡´í•˜ë©´ì„œ ìµœì‹  í…œí”Œë¦¿ ê¸°ëŠ¥(ìƒˆ ì—ì´ì „íŠ¸, ê¸°ëŠ¥ í”Œë˜ê·¸)ì„ ì ìš©í•©ë‹ˆë‹¤. ì¶©ëŒì€ ìë™ í•´ê²°ë˜ë©°, ë¡¤ë°±ìš© ë³µì› ì§€ì ì´ ìƒì„±ë©ë‹ˆë‹¤.

---

## Common Patterns

### Pattern 1: í…œí”Œë¦¿ ë³€ìˆ˜ ì‹œìŠ¤í…œ

í…œí”Œë¦¿ì—ì„œ ë™ì  ê°’ì„ ëŒ€ì²´í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

```json
// templates/fastapi-backend/template.json
{
  "name": "fastapi-backend",
  "version": "1.0.0",
  "variables": {
    "PROJECT_NAME": {
      "type": "string",
      "required": true,
      "description": "Project name (kebab-case)"
    },
    "AUTHOR": {
      "type": "string",
      "default": "MoAI Team"
    },
    "PYTHON_VERSION": {
      "type": "string",
      "default": "3.13",
      "enum": ["3.11", "3.12", "3.13"]
    },
    "DATABASE": {
      "type": "string",
      "default": "postgresql",
      "enum": ["postgresql", "mysql", "sqlite"]
    }
  },
  "files": {
    "pyproject.toml": "substitute",
    "README.md": "substitute",
    "src/**/*.py": "copy",
    ".env.example": "substitute"
  },
  "post_hooks": [
    "uv sync",
    "git init"
  ]
}
```

```toml
# templates/fastapi-backend/pyproject.toml.template
[project]
name = "gx10-install"
version = "0.1.0"
requires-python = ">={{PYTHON_VERSION}}"
authors = [{ name = "@user" }]

[tool.uv]
dev-dependencies = [
    "pytest>=8.0",
    "pytest-asyncio>=0.23"
]
```

### Pattern 2: í”¼ë“œë°± ìœ í˜• ìë™ ë¶„ë¥˜

ì‚¬ìš©ì ì…ë ¥ì—ì„œ í”¼ë“œë°± ìœ í˜•ì„ ìë™ìœ¼ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.

```python
def classify_feedback(user_input: str) -> str:
    """í”¼ë“œë°± ìœ í˜• ìë™ ë¶„ë¥˜"""

    # í‚¤ì›Œë“œ ê¸°ë°˜ ë¶„ë¥˜
    classifiers = {
        "bug": ["error", "bug", "broken", "not working", "crash", "fail"],
        "feature": ["add", "new feature", "implement", "create", "support"],
        "improvement": ["improve", "enhance", "better", "optimize", "upgrade"],
        "refactor": ["refactor", "restructure", "reorganize", "clean up"],
        "docs": ["document", "docs", "readme", "guide", "tutorial"],
        "question": ["how to", "what is", "why", "question", "help"]
    }

    user_lower = user_input.lower()

    for feedback_type, keywords in classifiers.items():
        for keyword in keywords:
            if keyword in user_lower:
                return feedback_type

    return "improvement"  # ê¸°ë³¸ê°’

# ì‚¬ìš© ì˜ˆì‹œ
feedback_type = classify_feedback("JWT í† í°ì´ ê°±ì‹ ë˜ì§€ ì•ŠëŠ” ë²„ê·¸")
# â†’ "bug"

feedback_type = classify_feedback("ë‹¤í¬ ëª¨ë“œ ì§€ì› ì¶”ê°€í•´ì£¼ì„¸ìš”")
# â†’ "feature"
```

### Pattern 3: ë²„ì „ ì¶”ì  ì‹œìŠ¤í…œ

í…œí”Œë¦¿ ë²„ì „ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì´ë ¥ì„ ì¶”ì í•©ë‹ˆë‹¤.

```json
// .moai/config/template-history.json
{
  "template_optimization": {
    "last_optimized": "2025-12-06T12:00:00Z",
    "backup_version": "backup-2025-10-15-v0.27.0",
    "template_version": "0.28.2",
    "customizations_preserved": [
      "language",
      "team_settings",
      "domains",
      "custom_agents"
    ]
  },
  "version_history": [
    {
      "version": "0.28.2",
      "date": "2025-12-06",
      "changes": ["Added new agents", "Updated quality thresholds"]
    },
    {
      "version": "0.27.0",
      "date": "2025-10-15",
      "changes": ["Initial template setup"]
    }
  ],
  "migration_log": [
    {
      "from": "0.27.0",
      "to": "0.28.2",
      "date": "2025-12-06",
      "status": "success",
      "conflicts_resolved": 1
    }
  ]
}
```

---

## Anti-Patterns (í”¼í•´ì•¼ í•  íŒ¨í„´)

### Anti-Pattern 1: í…œí”Œë¦¿ ì§ì ‘ ìˆ˜ì •

**Problem**: ê³µìœ  í…œí”Œë¦¿ì„ ì§ì ‘ ìˆ˜ì •í•˜ì—¬ íŒ€ ì¶©ëŒ ë°œìƒ

```bash
# ì˜ëª»ëœ ì˜ˆì‹œ - í…œí”Œë¦¿ ì§ì ‘ ìˆ˜ì •
vim .claude/skills/moai-workflow-templates/modules/code-templates.md
# â†’ MoAI-ADK ì—…ë°ì´íŠ¸ ì‹œ ì¶©ëŒ
# â†’ íŒ€ì› ê°„ ë¶ˆì¼ì¹˜
```

**Solution**: ì»¤ìŠ¤í„°ë§ˆì´ì§• ë ˆì´ì–´ ì‚¬ìš©

```python
# ì˜¬ë°”ë¥¸ ì˜ˆì‹œ - ì»¤ìŠ¤í„°ë§ˆì´ì§• ë¶„ë¦¬
# 1. í”„ë¡œì íŠ¸ë³„ ì˜¤ë²„ë¼ì´ë“œ ìƒì„±
custom_templates = {
    "backend/fastapi": {
        "overrides": {
            "PYTHON_VERSION": "3.12",  # íŒ€ í‘œì¤€
            "DATABASE": "mysql"
        }
    }
}

# 2. ì»¤ìŠ¤í„°ë§ˆì´ì§• ì €ì¥
save_project_customizations(custom_templates)
# â†’ .moai/config/template-overrides.jsonì— ì €ì¥
# â†’ í…œí”Œë¦¿ ì—…ë°ì´íŠ¸ì™€ ë…ë¦½ì 
```

### Anti-Pattern 2: ë°±ì—… ì—†ëŠ” ë¨¸ì§€

**Problem**: ë³µì› ì§€ì  ì—†ì´ í…œí”Œë¦¿ ë¨¸ì§€ ìˆ˜í–‰

```python
# ì˜ëª»ëœ ì˜ˆì‹œ - ë°±ì—… ì—†ìŒ
optimizer.smart_merge(
    backup=None,  # ìœ„í—˜!
    template="v0.28.2"
)
# â†’ ë¨¸ì§€ ì‹¤íŒ¨ ì‹œ ë³µêµ¬ ë¶ˆê°€
# â†’ ì‚¬ìš©ì ì„¤ì • ì†ì‹¤ ìœ„í—˜
```

**Solution**: í•­ìƒ ë°±ì—… ìƒì„± í›„ ë¨¸ì§€

```python
# ì˜¬ë°”ë¥¸ ì˜ˆì‹œ - ë°±ì—… ìš°ì„ 
# 1. ë°±ì—… ìƒì„±
backup_id = optimizer.create_backup("pre-merge")

# 2. ë¨¸ì§€ ìˆ˜í–‰
try:
    result = optimizer.smart_merge(
        backup=backup_id,
        template="v0.28.2"
    )
except MergeError as e:
    # 3. ì‹¤íŒ¨ ì‹œ ë³µì›
    optimizer.restore_from_backup(backup_id)
    raise
```

### Anti-Pattern 3: ë¶ˆì™„ì „í•œ í”¼ë“œë°± í…œí”Œë¦¿

**Problem**: í•„ìˆ˜ ì •ë³´ ì—†ì´ í”¼ë“œë°± ì œì¶œ

```markdown
# ì˜ëª»ëœ ì˜ˆì‹œ - ì •ë³´ ë¶€ì¡±
## Bug Report
ë¡œê·¸ì¸ì´ ì•ˆ ë©ë‹ˆë‹¤.
<!-- í™˜ê²½, ì¬í˜„ ë‹¨ê³„, ì˜ˆìƒ ë™ì‘ ì—†ìŒ -->
```

**Solution**: í…œí”Œë¦¿ì˜ ëª¨ë“  ì„¹ì…˜ ì‘ì„±

```markdown
# ì˜¬ë°”ë¥¸ ì˜ˆì‹œ - ì™„ì „í•œ ì •ë³´
## Bug Report

### Environment
- OS: macOS 15.1
- Browser: Chrome 120
- Version: 1.2.3

### Steps to Reproduce
1. Navigate to /login
2. Enter valid credentials
3. Click "Login" button

### Expected Behavior
Redirect to dashboard with valid session

### Actual Behavior
Stays on login page, no error message

### Logs
```
Error: Session token validation failed
```
```

### Anti-Pattern 4: í…œí”Œë¦¿ ë²„ì „ ë¬´ì‹œ

**Problem**: í…œí”Œë¦¿ ë²„ì „ì„ í™•ì¸í•˜ì§€ ì•Šê³  ì‚¬ìš©

```python
# ì˜ëª»ëœ ì˜ˆì‹œ - ë²„ì „ ë¬´ì‹œ
template = load_template("backend/fastapi")
# ì–´ë–¤ ë²„ì „ì¸ì§€ ëª¨ë¦„
project = template.scaffold(name="my-api")
# â†’ ì˜¤ë˜ëœ íŒ¨í„´ ì‚¬ìš© ê°€ëŠ¥
# â†’ ë³´ì•ˆ ì·¨ì•½ì  í¬í•¨ ê°€ëŠ¥
```

**Solution**: ë²„ì „ í™•ì¸ í›„ ì‚¬ìš©

```python
# ì˜¬ë°”ë¥¸ ì˜ˆì‹œ - ë²„ì „ í™•ì¸
template = load_template("backend/fastapi")

# ë²„ì „ í™•ì¸
if template.version < "1.2.0":
    print(f"Warning: Template version {template.version} is outdated")
    template = update_template("backend/fastapi")

# ìµœì‹  ë²„ì „ìœ¼ë¡œ ìŠ¤ìºí´ë”©
project = template.scaffold(name="my-api")
```

---

## Template Types Reference

### ì½”ë“œ í…œí”Œë¦¿

| í…œí”Œë¦¿ | ìš©ë„ | í¬í•¨ ê¸°ëŠ¥ |
|--------|------|----------|
| backend/fastapi | FastAPI REST API | Auth, DB, Celery, Docker |
| backend/django | Django ì›¹ ì•± | ORM, Admin, REST framework |
| frontend/react | React SPA | Vite, Router, Zustand |
| frontend/nextjs | Next.js í’€ìŠ¤íƒ | App Router, API Routes |
| fullstack/t3 | T3 Stack | Next.js, tRPC, Prisma |

### í”¼ë“œë°± í…œí”Œë¦¿

| ìœ í˜• | íŠ¸ë¦¬ê±° í‚¤ì›Œë“œ | í•„ìˆ˜ ì„¹ì…˜ |
|------|--------------|----------|
| Bug | error, bug, broken | Environment, Steps, Expected/Actual |
| Feature | add, new, implement | Description, Use Case, Acceptance |
| Improvement | improve, enhance | Current, Proposed, Benefits |
| Refactor | refactor, restructure | Scope, Rationale, Impact |
| Docs | document, guide | Section, Changes, Examples |
| Question | how to, what is | Context, Question, Attempts |

---

## Workflow Integration

```
í”„ë¡œì íŠ¸ ì´ˆê¸°í™”:
/moai:0-project â†’ ì½”ë“œ í…œí”Œë¦¿ ì„ íƒ â†’ ìŠ¤ìºí´ë”© â†’ ë²„ì „ ì¶”ì 

í”¼ë“œë°± ì œì¶œ:
/moai:9-feedback â†’ ìë™ ë¶„ë¥˜ â†’ í…œí”Œë¦¿ ì ìš© â†’ GitHub ì´ìŠˆ ìƒì„±

í…œí”Œë¦¿ ì—…ë°ì´íŠ¸:
ë²„ì „ ê°ì§€ â†’ ë°±ì—… ìƒì„± â†’ ìŠ¤ë§ˆíŠ¸ ë¨¸ì§€ â†’ ë²„ì „ ê¸°ë¡
```

---

Version: 1.0.0
Last Updated: 2025-12-06
---

## ğŸ“ ë¬¸ì„œ ì •ë³´

**ì‘ì„±ì**:

- AI: Claude Sonnet 4.5
- í™˜ê²½: MoAI-ADK v11.0.0
- ì‘ì„±ì¼: 2026-02-01

**ë¦¬ë·°ì–´**:

- drake

